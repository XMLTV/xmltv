XMLTV 0.5.11

Gather television listings, process them and organize your viewing.
XMLTV is a file format for storing TV listings, defined in xmltv.dtd.
Then there are several tools to produce and process these listings.

Please see doc/QuickStart for documentation on what each program does,
and xmltv.dtd for documentation on the file format.

* Changes in this release

This is a big release with lots of changes.  I've grouped them into
areas and tried to list them in rough order of importance.  But note
the new Date::Manip requirement.

** New and removed grabbers

The grabber tv_grab_us_gist has been removed because the site it
grabbed from no longer exists.

Added a new grabber tv_grab_hu for Hungary, by Attila Szekeres and
Zsolt Varga.

Added a new grabber tv_grab_dk for Denmark, by Jesper Skov.

** Grabber fixes and improvements

Tv_grab_fi works again after a change to the site it grabs.

Tv_grab_uk_rt now works again, and includes some more details (related
website), after a change to the site it grabs.

Fixed configuration of tv_grab_it. 

Tv_grab_na: Fixed configuration bug when two providers have the same
description.  Now has more xmltvish channel ids (code has been added
to tv_check to cope with the changeover).  Output now includes episode
numbers.

Tv_grab_de now generates cleaner output with <channel> elements and
xmltvish channel ids; it no longer mishandles umlauts.

Tv_grab_es: fixed bug for programmes without description; handles
title and sub-title.

Tv_grab_sn now outputs all programmes, even those without
descriptions.

Tv_grab_nl now has more intelligent handling of the many strange times
produced by the site it grabs from, and tries hard to produce sane
output, at least when --slow is not given.  It no longer produces
warning messages for 'Ieder heel uur' and 'onder voorbehoud', which
are now ignored.  It now includes <url> in the output for related
websites.

Tv_grab_nz handles 'Part 2' and similar.

Made the 'you must run --configure' message from most grabbers more
user-friendly: they won't start downloading stuff before giving the
error.

Updated some channel packages for tv_grab_uk.

** Filter programs

Fixed a design bug in tv_sort: the old ordering that ignored stop-time
if either programme being compared didn't have it was not in fact a
valid ordering relation.  Now tv_sort ranks 'no stop time' before
'some stop time'.  The way stop times are added to listings has
changed accordinly.  This should fix some bugs reported against
tv_sort.

Fixed 'empty regexp' behaviour in tv_grep, for example
'tv_grep --desc ""' should match all programmes that have a
description of any kind.

tv_imdb now has a --download option to automate fetching the necessary
files from the imdb ftp site, and should run a bit faster.  It no
longer requires look(1) to be installed.

** tv_check and tv_pick_cgi

Tv_check: Filter out episodes more than a week away in the extra
episode scan.  Fixed bug where day was not set on initial --myreplaytv
import.  No longer gives a false alarm when --myreplaytv can't guess a
show day.

New small utility merge_tvprefs for use with tv_pick_cgi.

** Library, build system and general

A new prerequisite is version 5.40.epa1 of Date::Manip.  This is an
unofficial release which fixes several bugs in the mainstream version
of Date::Manip.  You can get it from <http://membled.com/work/patches/DateManip/>.

Fixed a bug in several programs with the meaning of 'now' passed on
the command line.

The Makefile.PL should now work for people building the Perl source
code on Windows.

The XMLTV.pm library, and hence all of the xmltv filter programs, now
strip \r on reading files.  This should fix some test failures on
Windows.  The library is a bit more robust in handling bad input, and
won't return invalid programme or channel data to its caller, nor
write invalid empty data elements to XML.

The installation process is a bit friendlier - all the grabbers are
now optional, but you don't have to say 'yes' or 'no' to each in turn
if you accept the default configuration.

Every executable in the distribution now accepts --version.

* Installation

% perl Makefile.PL
% make
% make test
% make install

To install in a custom directory, replace the first line with
something like

% perl Makefile.PL PREFIX=/wherever/

The system requirements are perl 5.005_03 or later, and a few Perl
modules.  You will be asked about some optional components; if you
choose not to install them then there are fewer dependencies.  The
full list of needed modules is:

XML::Twig
XML::Writer
Date::Manip from <http://membled.com/work/patches/DateManip/>
LWP
Memoize (included with perl 5.8 and later)

HTML::Parser       (if you choose to install tv_grab_na)
HTML::TableExtract (if you choose to install tv_grab_sn)
HTML::TreeBuilder  (for many of the grabbers)
Tk::TableMatrix    (if you choose to install tv_check)
XML::Simple        (if you choose to install tv_check)
CGI                (if you choose to install tv_pick_cgi)

The grabber for New Zealand, tv_grab_nz, is written in Python so if
you want to run it you will need Python installed.

The following modules are recommended, but the software still works
without them:

Term::ProgressBar                (displays pretty progress meters)
Compress::Zlib                   (makes tv_grab_de a bit faster)
Lingua::Preferred                (helps with multilingual listings)
Unicode::String                  (non-ASCII chars in LaTeX output)
Lingua::EN::Numbers::Ordinate    (not really needed, to be honest)

And the Log::TraceMessages module is useful for debugging, but not
needed for normal use.

Apart from Date::Manip, all of these can be installed with tarballs
downloaded from CPAN or (hopefully) using the CPAN shell program:
'perl -MCPAN -e shell', then 'install XML::Twig' and so on.  But you
may find it easier to search for packaged versions from your OS vendor
or others - places which distribute a packaged version of xmltv will
often provide the modules it needs too.

For Date::Manip, you must get the version at
<http://membled.com/work/patches/DateManip/> rather than the one at
CPAN.  Again, there may be packaged versions of this 'epa' release for
your operating system.

* Author and copying

This is free software distributed under the GPL, see COPYING.  But if
you would like to use the code under some other conditions, please do
ask.  There are many who have contributed code, they are credited in
individual source files.

There is a web page at
<http://membled.com/work/apps/xmltv/> and a Sourceforge
project 'XMLTV'.  Please join the xmltv-announce mailing list at
Sourceforge for notification of new versions.

-- Ed Avis, ed@membled.com, 2003-06-22
$Id$
